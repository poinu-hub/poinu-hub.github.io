import{p as se,n as me,m as le,y as pe,z as ye,q as Se,l as oe,r as ke,g as W,s as Ce,a7 as xe,a8 as we,t as _e,A as ze,B as be,v as Ie,u as ae,a as n,I as j,ak as Ve,a6 as Pe,_ as Re,Z as C,C as y,al as K,am as Ee,H as J,K as Te,an as Q,ad as Ae,ae as Z,w as h,ah as Fe,F as $,o as H,aj as He,b as B,af as O,V as X,ag as Be,D as Oe,ac as Ge,ao as Ue,c as We}from"./index-7iQxqR-J.js";import{_ as Me}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{b as De,a as G,V as U}from"./VRow-B-iEVqEk.js";import{f as Le,h as Ne,k as qe,l as je,y as Ke,z as Je,V as Y,A as Qe,B as Ze,w as ee}from"./VBtn-C94k85xh.js";const $e=se({color:String,...me(),...le(),...pe(),...ye(),...Le(),...Ne(),...Se(),...oe(),...ke()},"VSheet"),Xe=W()({name:"VSheet",props:$e(),setup(e,l){let{slots:o}=l;const{themeClasses:a}=Ce(e),{backgroundColorClasses:r,backgroundColorStyles:f}=xe(we(e,"color")),{borderClasses:i}=_e(e),{dimensionStyles:g}=ze(e),{elevationClasses:d}=be(e),{locationStyles:p}=qe(e),{positionClasses:w}=je(e),{roundedClasses:c}=Ie(e);return ae(()=>n(e.tag,{class:["v-sheet",a.value,r.value,i.value,d.value,w.value,c.value,e.class],style:[f.value,g.value,p.value,e.style]},o)),{}}});function Ye(e){let{selectedElement:l,containerElement:o,isRtl:a,isHorizontal:r}=e;const f=x(r,o),i=ne(r,a,o),g=x(r,l),d=ie(r,l),p=g*.4;return i>d?d-p:i+f<d+g?d-f+g+p:i}function et(e){let{selectedElement:l,containerElement:o,isHorizontal:a}=e;const r=x(a,o),f=ie(a,l),i=x(a,l);return f-r/2+i/2}function te(e,l){const o=e?"scrollWidth":"scrollHeight";return(l==null?void 0:l[o])||0}function tt(e,l){const o=e?"clientWidth":"clientHeight";return(l==null?void 0:l[o])||0}function ne(e,l,o){if(!o)return 0;const{scrollLeft:a,offsetWidth:r,scrollWidth:f}=o;return e?l?f-r+a:a:o.scrollTop}function x(e,l){const o=e?"offsetWidth":"offsetHeight";return(l==null?void 0:l[o])||0}function ie(e,l){const o=e?"offsetLeft":"offsetTop";return(l==null?void 0:l[o])||0}const re=Symbol.for("vuetify:v-slide-group"),st=se({centerActive:Boolean,direction:{type:String,default:"horizontal"},symbol:{type:null,default:re},nextIcon:{type:j,default:"$next"},prevIcon:{type:j,default:"$prev"},showArrows:{type:[Boolean,String],validator:e=>typeof e=="boolean"||["always","desktop","mobile"].includes(e)},...le(),...Ve({mobile:null}),...oe(),...Ke({selectedClass:"v-slide-group-item--active"})},"VSlideGroup"),lt=W()({name:"VSlideGroup",props:st(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const{isRtl:a}=Pe(),{displayClasses:r,mobile:f}=Re(e),i=Je(e,e.symbol),g=C(!1),d=C(0),p=C(0),w=C(0),c=y(()=>e.direction==="horizontal"),{resizeRef:v,contentRect:b}=K(),{resizeRef:m,contentRect:I}=K(),M=Ee(),D=y(()=>({container:v.el,duration:200,easing:"easeOutQuart"})),ue=y(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[0]):-1),ce=y(()=>i.selected.value.length?i.items.value.findIndex(t=>t.id===i.selected.value[i.selected.value.length-1]):-1);if(J){let t=-1;Te(()=>[i.selected.value,b.value,I.value,c.value],()=>{cancelAnimationFrame(t),t=requestAnimationFrame(()=>{if(b.value&&I.value){const s=c.value?"width":"height";p.value=b.value[s],w.value=I.value[s],g.value=p.value+1<w.value}if(ue.value>=0&&m.el){const s=m.el.children[ce.value];L(s,e.centerActive)}})})}const _=C(!1);function L(t,s){let u=0;s?u=et({containerElement:v.el,isHorizontal:c.value,selectedElement:t}):u=Ye({containerElement:v.el,isHorizontal:c.value,isRtl:a.value,selectedElement:t}),N(u)}function N(t){if(!J||!v.el)return;const s=x(c.value,v.el),u=ne(c.value,a.value,v.el);if(!(te(c.value,v.el)<=s||Math.abs(t-u)<16)){if(c.value&&a.value&&v.el){const{scrollWidth:z,offsetWidth:F}=v.el;t=z-F-t}c.value?M.horizontal(t,D.value):M(t,D.value)}}function de(t){const{scrollTop:s,scrollLeft:u}=t.target;d.value=c.value?u:s}function fe(t){if(_.value=!0,!(!g.value||!m.el)){for(const s of t.composedPath())for(const u of m.el.children)if(u===s){L(u);return}}}function ve(t){_.value=!1}let V=!1;function he(t){var s;!V&&!_.value&&!(t.relatedTarget&&((s=m.el)!=null&&s.contains(t.relatedTarget)))&&k(),V=!1}function q(){V=!0}function ge(t){if(!m.el)return;function s(u){t.preventDefault(),k(u)}c.value?t.key==="ArrowRight"?s(a.value?"prev":"next"):t.key==="ArrowLeft"&&s(a.value?"next":"prev"):t.key==="ArrowDown"?s("next"):t.key==="ArrowUp"&&s("prev"),t.key==="Home"?s("first"):t.key==="End"&&s("last")}function k(t){var u,S;if(!m.el)return;let s;if(!t)s=Ae(m.el)[0];else if(t==="next"){if(s=(u=m.el.querySelector(":focus"))==null?void 0:u.nextElementSibling,!s)return k("first")}else if(t==="prev"){if(s=(S=m.el.querySelector(":focus"))==null?void 0:S.previousElementSibling,!s)return k("last")}else t==="first"?s=m.el.firstElementChild:t==="last"&&(s=m.el.lastElementChild);s&&s.focus({preventScroll:!0})}function P(t){const s=c.value&&a.value?-1:1,u=(t==="prev"?-s:s)*p.value;let S=d.value+u;if(c.value&&a.value&&v.el){const{scrollWidth:z,offsetWidth:F}=v.el;S+=z-F}N(S)}const R=y(()=>({next:i.next,prev:i.prev,select:i.select,isSelected:i.isSelected})),E=y(()=>{switch(e.showArrows){case"always":return!0;case"desktop":return!f.value;case!0:return g.value||Math.abs(d.value)>0;case"mobile":return f.value||g.value||Math.abs(d.value)>0;default:return!f.value&&(g.value||Math.abs(d.value)>0)}}),T=y(()=>Math.abs(d.value)>1),A=y(()=>{if(!v.value)return!1;const t=te(c.value,v.el),s=tt(c.value,v.el);return t-s-Math.abs(d.value)>1});return ae(()=>n(e.tag,{class:["v-slide-group",{"v-slide-group--vertical":!c.value,"v-slide-group--has-affixes":E.value,"v-slide-group--is-overflowing":g.value},r.value,e.class],style:e.style,tabindex:_.value||i.selected.value.length?-1:0,onFocus:he},{default:()=>{var t,s,u;return[E.value&&n("div",{key:"prev",class:["v-slide-group__prev",{"v-slide-group__prev--disabled":!T.value}],onMousedown:q,onClick:()=>T.value&&P("prev")},[((t=o.prev)==null?void 0:t.call(o,R.value))??n(Q,null,{default:()=>[n(Y,{icon:a.value?e.nextIcon:e.prevIcon},null)]})]),n("div",{key:"container",ref:v,class:"v-slide-group__container",onScroll:de},[n("div",{ref:m,class:"v-slide-group__content",onFocusin:fe,onFocusout:ve,onKeydown:ge},[(s=o.default)==null?void 0:s.call(o,R.value)])]),E.value&&n("div",{key:"next",class:["v-slide-group__next",{"v-slide-group__next--disabled":!A.value}],onMousedown:q,onClick:()=>A.value&&P("next")},[((u=o.next)==null?void 0:u.call(o,R.value))??n(Q,null,{default:()=>[n(Y,{icon:a.value?e.prevIcon:e.nextIcon},null)]})])]}})),{selected:i.selected,scrollTo:P,scrollOffset:d,focus:k,hasPrev:T,hasNext:A}}}),ot=W()({name:"VSlideGroupItem",props:Qe(),emits:{"group:selected":e=>!0},setup(e,l){let{slots:o}=l;const a=Ze(e,re);return()=>{var r;return(r=o.default)==null?void 0:r.call(o,{isSelected:a.isSelected.value,select:a.select,toggle:a.toggle,selectedClass:a.selectedClass.value})}}}),at={data(){return{imageUrl:"https://bad.src/not/valid",imageClass:"",history:[],pageId:null,loading:!1,showSelfieConsent:!1}},mounted(){const e=this.$route.query.id;this.pageId=e,this.onInit(),console.log(e.id)},methods:{async onInit(){this.history=this.getHistory()},getHistory(){let e=localStorage.getItem("history");return e==null?e=[]:e=JSON.parse(e),console.log(e),e},async addtoHistory(){console.log("adding to history");let e=this.getHistory();e.includes(this.imageUrl)||(e.push(this.imageUrl),e.length>5&&e.pop(),this.history=e,localStorage.setItem("history",JSON.stringify(e)),this.loading=!1)},async showPhoto(){this.loading=!0;let e=this.getImageUrl();this.isImageURLValid(e,this.addtoHistory),this.imageUrl=e,this.imageClass="image-frame",this.showSelfieConsent=!0},getImageUrl(){return this.pageId},isImageURLValid(e,l,o){const a=new Image;a.onload=function(){l()},a.onerror=function(){o()},a.src=e},async initCameraShow(){try{const e=await navigator.mediaDevices.getUserMedia({video:!0});this.$refs.video.srcObject=e}catch(e){console.error("Error accessing the camera: ",e)}}}},nt={class:"d-flex align-center justify-center fill-height"},it={class:"d-flex align-center justify-center fill-height"};function rt(e,l,o,a,r,f){return H(),Z($,null,[n(Fe,{elevation:2},{default:h(()=>[n(He,null,{default:h(()=>l[0]||(l[0]=[B("Easter")])),_:1})]),_:1}),n(De,null,{default:h(()=>[n(G,{align:"center"},{default:h(()=>[n(U,null,{default:h(()=>[O("div",{class:Be(r.imageClass),width:"80%"},[n(X,{class:"mx-auto","min-height":"250","lazy-src":"https://picsum.photos/id/11/100/60",id:"image-id",src:r.imageUrl},{placeholder:h(()=>[O("div",nt,[n(ee,{"prepend-icon":"mdi-camera",size:"x-large",variant:"outlined",loading:r.loading,color:"primary",onClick:f.showPhoto,stacked:""},{default:h(()=>l[1]||(l[1]=[B(" Show me ")])),_:1},8,["loading","onClick"])])]),_:1},8,["src"])],2)]),_:1})]),_:1}),n(G,null,{default:h(()=>[n(U,null,{default:h(()=>[O("div",it,[Oe(n(ee,{"prepend-icon":"mdi-camera",size:"small",variant:"outlined",color:"primary",onClick:f.initCameraShow},{default:h(()=>l[2]||(l[2]=[B(" Say Thank you by sharing a selfie. ")])),_:1},8,["onClick"]),[[Ge,r.showSelfieConsent]])])]),_:1})]),_:1}),n(G,{style:{display:"none"}},{default:h(()=>[n(U,null,{default:h(()=>[n(Xe,{class:"mx-auto history-list hide",variant:"outlined",color:"blue-grey-lighten-5"},{default:h(()=>[n(lt,{"show-arrows":""},{default:h(()=>[(H(!0),Z($,null,Ue(r.history,(i,g)=>(H(),We(ot,{key:g},{default:h(({isSelected:d,toggle:p})=>[n(X,{class:"ma-2 history-thumbnail","max-height":"60","max-width":"60","lazy-src":"https://picsum.photos/id/11/100/60",id:"image-history",src:i},null,8,["src"])]),_:2},1024))),128))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})],64)}const vt=Me(at,[["render",rt]]);export{vt as default};
